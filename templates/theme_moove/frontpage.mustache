{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template theme_moove/frontpage
    Moodle frontpage template.
}}
{{> theme_moove/head }}

<body {{{ bodyattributes }}}>
{{> core/local/toast/wrapper}}
<div id="page-wrapper" class="d-print-block">
    {{{ output.standard_top_of_body_html }}}
    {{> theme_moove/navbar }}

    <div id="page" data-region="mainpage" data-usertour="scroller" class="drawers drag-container bg-white">
        <!-- Slider Section -->
        {{#slidercount}}
        <section id="mooveslideshow" class="position-relative {{#isloggedin}}slider-logged-in{{/isloggedin}}">
            <div id="frontpage-carousel" class="carousel slide" data-ride="carousel">
                {{^slidersingleslide}}
                <ol class="carousel-indicators">
                    {{#slides}}
                        <li data-target="#frontpage-carousel" data-slide-to="{{{key}}}" {{#active}}class="active"{{/active}}></li>
                    {{/slides}}
                </ol>
                {{/slidersingleslide}}
                <div class="carousel-inner">
                    {{#slides}}
                        <div class="carousel-item {{#active}}active{{/active}}">
                            <div class="carousel-image-wrapper">
                                <!-- Imagen Desktop -->
                                <img src="{{{image}}}" alt="{{{slidertitle}}}" class="carousel-image carousel-image-desktop">
                                <!-- Imagen Mobile -->
                                {{#mobile_image}}
                                    <img src="{{{mobile_image}}}" alt="{{{slidertitle}}}" class="carousel-image carousel-image-mobile">
                                {{/mobile_image}}
                                {{^mobile_image}}
                                    <img src="{{{image}}}" alt="{{{slidertitle}}}" class="carousel-image carousel-image-mobile">
                                {{/mobile_image}}
                            </div>
                            {{#hascaption}}
                                <div class="carousel-caption d-none d-md-block">
                                    {{#title}}<h2 class="display-4 text-white">{{{.}}}</h2>{{/title}}
                                    {{#caption}}<div class="lead text-white">{{{.}}}</div>{{/caption}}
                                </div>
                            {{/hascaption}}
                        </div>
                    {{/slides}}
                </div>
                {{^slidersingleslide}}
                <a class="carousel-control-prev" href="#frontpage-carousel" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">{{#str}}previous{{/str}}</span>
                </a>
                <a class="carousel-control-next" href="#frontpage-carousel" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">{{#str}}next{{/str}}</span>
                </a>
                {{/slidersingleslide}}
            </div>
        </section>
        {{/slidercount}}

        <!-- About Section -->
        {{#aboutsection}}
        <section id="about-section" class="py-5 animate-section">
            <div class="container">
                <div class="about-content-wrapper">
                    <h2 class="section-heading mb-4">{{{abouttitle}}}</h2>
                    <div class="section-content">
                        {{{aboutcontent}}}
                    </div>
                </div>
            </div>
        </section>
        {{/aboutsection}}

        <!-- Career Boxes Section -->
        {{#careerboxes}}
        <section id="career-section" class="py-5 bg-light animate-section">
            <div class="container">
                <div class="row justify-content-center mb-5">
                    <div class="col-lg-8 text-center">
                        <h2 class="section-heading">{{#str}}careersection_title, theme_compecer{{/str}}</h2>
                    </div>
                </div>
                <div class="row">
                    {{#boxes}}
                    <div class="col-md-4 mb-4">
                        <div class="career-box text-center h-100 p-4 bg-white rounded shadow-sm">
                            <div class="icon-wrapper mb-4">
                                <i class="fas fa-{{{icon}}} fa-3x text-primary"></i>
                            </div>
                            <h3 class="h4 mb-3">{{{title}}}</h3>
                            <div class="description">
                                {{{content}}}
                            </div>
                        </div>
                    </div>
                    {{/boxes}}
                </div>
            </div>
        </section>
        {{/careerboxes}}

        <!-- Main Content Area -->
        <div id="topofscroll" class="animate-section">
            <div id="page-content" class="d-print-block main-inner">
                <div id="region-main-box">
                    <section id="region-main" aria-label="{{#str}}content{{/str}}">
                        {{{ output.course_content_header }}}
                        {{{ output.main_content }}}
                        {{{ output.course_content_footer }}}
                    </section>
                </div>
            </div>
        </div>

        <!-- Search and Categories Section -->
        {{#hassearchcategories}}
        <section id="search-categories" class="py-5 animate-section" style="background-color: {{{categoriesbgcolor}}}">
            <div class="container">
                <!-- Search Box -->
                <div class="row justify-content-center">
                    <div class="col-md-8 col-lg-6">
                        <div class="search-box mb-5">
                            <h2 class="section-heading text-center mb-4">{{{searchsectiontitle}}}</h2>
                            {{#searchsectiondesc}}
                            <p class="text-center mb-4">{{{searchsectiondesc}}}</p>
                            {{/searchsectiondesc}}
                            <form class="search-form" action="{{config.wwwroot}}/course/search.php" method="get">
                                <div class="input-group">
                                    <input type="text" 
                                           class="form-control form-control-lg" 
                                           name="q" 
                                           placeholder="{{#str}}searchcourses, theme_compecer{{/str}}"
                                           aria-label="{{#str}}searchcourses, theme_compecer{{/str}}">
                                    <div class="input-group-append">
                                        <button class="btn btn-primary btn-lg" type="submit">
                                            <i class="fa fa-search" aria-hidden="true"></i>
                                            <span class="sr-only">{{#str}}search{{/str}}</span>
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Categories Grid -->
                <div class="categories-section">
                    <h3 class="text-center mb-4">{{#str}}browsecategories, theme_compecer{{/str}}</h3>
                    <div class="row">
                        {{#categories}}
                        <div class="col-md-4 mb-4">
                            <div class="category-box h-100 bg-white rounded shadow-sm p-4">
                                <h4 class="h5 mb-3">
                                    <a href="{{{url}}}" class="text-decoration-none">
                                        {{{name}}}
                                    </a>
                                </h4>
                                {{#description}}
                                <p class="small text-muted mb-2">{{{description}}}</p>
                                {{/description}}
                                <div class="course-count">
                                    <small class="text-primary">
                                        {{{coursecounttext}}}
                                    </small>
                                </div>
                            </div>
                        </div>
                        {{/categories}}
                    </div>
                </div>
            </div>
        </section>
        {{/hassearchcategories}}

        {{> theme_moove/footer }}
    </div>
    {{{ output.standard_after_main_region_html }}}
</div>

</body>
</html>

{{#js}}
require(['jquery', 'theme_boost/bootstrap/carousel'], function($) {
    // Inicialización del carrusel
    $('#frontpage-carousel').carousel({
        interval: 5000,
        keyboard: true,
        ride: 'carousel',
        wrap: true,
        pause: 'hover'
    });

    // Función para manejar las animaciones de entrada
    function handleScrollAnimations() {
        const animateSections = document.querySelectorAll('.animate-section');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, {
            threshold: 0.15,
            rootMargin: '0px'
        });

        animateSections.forEach(section => {
            observer.observe(section);
        });
    }

    // Inicializar animaciones
    handleScrollAnimations();
});
{{/js}}